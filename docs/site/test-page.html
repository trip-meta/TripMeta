<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripMeta - Site Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
            min-height: 100vh;
        }
        .test-section {
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        h1 { color: #667eea; margin-bottom: 20px; }
        h2 { color: #764ba2; margin-top: 0; }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
        }
        .pass { background: rgba(34, 197, 94, 0.2); border-left: 4px solid #22c55e; }
        .fail { background: rgba(239, 68, 68, 0.2); border-left: 4px solid #ef4444; }
        .info { background: rgba(59, 130, 246, 0.2); border-left: 4px solid #3b82f6; }
        a { color: #667eea; }
    </style>
</head>
<body>
    <div class="test-section">
        <h1>ðŸ§ª TripMeta Site Test Results</h1>
        <div id="results"></div>
    </div>

    <script>
        const results = document.getElementById('results');

        function addResult(type, title, message) {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `<strong>${type.toUpperCase()}:</strong> ${title}<br>${message}`;
            results.appendChild(div);
        }

        // Test 1: Check video file
        async function testVideo() {
            try {
                const response = await fetch('./vr.mp4', { method: 'HEAD' });
                if (response.ok) {
                    const size = response.headers.get('Content-Length');
                    const sizeMB = (size / (1024 * 1024)).toFixed(2);
                    addResult('pass', 'Video File', `vr.mp4 is accessible (${sizeMB} MB)`);
                } else {
                    addResult('fail', 'Video File', `vr.mp4 returned status ${response.status}`);
                }
            } catch (error) {
                addResult('fail', 'Video File', `Error: ${error.message}`);
            }
        }

        // Test 2: Check index.html loads
        async function testIndex() {
            try {
                const response = await fetch('./index.html');
                if (response.ok) {
                    const html = await response.text();
                    const hasVideo = html.includes('vr.mp4');
                    const hasControls = html.includes('controls');
                    addResult('pass', 'Index HTML', `index.html loads (${html.length} bytes)`);
                    addResult(hasVideo ? 'pass' : 'fail', 'Video Reference', hasVideo ? 'vr.mp4 referenced correctly' : 'Video reference not found');
                    addResult(hasControls ? 'pass' : 'info', 'Video Controls', hasControls ? 'Controls attribute present' : 'No controls attribute');
                } else {
                    addResult('fail', 'Index HTML', `index.html returned status ${response.status}`);
                }
            } catch (error) {
                addResult('fail', 'Index HTML', `Error: ${error.message}`);
            }
        }

        // Test 3: Check responsive viewport
        function testViewport() {
            const width = window.innerWidth;
            const isMobile = width < 768;
            addResult('info', 'Viewport', `Current width: ${width}px (${isMobile ? 'Mobile' : 'Desktop'})`);
        }

        // Test 4: Check CSS loaded
        function testStyles() {
            const bodyStyle = window.getComputedStyle(document.body);
            const bg = bodyStyle.background;
            const hasGradient = bg.includes('gradient');
            addResult('pass', 'CSS Styles', `Background styling applied (${hasGradient ? 'gradient' : 'solid'})`);
        }

        // Test 5: Check GitHub link
        async function testGitHubLink() {
            try {
                const response = await fetch('https://github.com/trip-meta/TripMeta', { method: 'HEAD' });
                addResult(response.ok ? 'pass' : 'info', 'GitHub Link', `GitHub repository is ${response.ok ? 'accessible' : 'redirecting or private'}`);
            } catch (error) {
                addResult('info', 'GitHub Link', 'Cannot verify from HTTP (CORS expected)');
            }
        }

        // Test 6: HTML structure
        function testHTMLStructure() {
            const hasHeader = document.querySelector('.header') !== null;
            const hasVideo = document.querySelector('video') !== null;
            const hasFeatures = document.querySelector('.features') !== null;
            const hasFooter = document.querySelector('.github-link') !== null;

            let allPass = true;
            if (hasHeader) addResult('pass', 'Header Section', 'Header element found');
            else { addResult('fail', 'Header Section', 'Header element missing'); allPass = false; }

            if (hasVideo) addResult('pass', 'Video Player', 'Video element found');
            else { addResult('fail', 'Video Player', 'Video element missing'); allPass = false; }

            if (hasFeatures) addResult('pass', 'Features Section', 'Features grid found');
            else { addResult('fail', 'Features Section', 'Features element missing'); allPass = false; }

            if (hasFooter) addResult('pass', 'Footer Link', 'GitHub link found');
            else { addResult('fail', 'Footer Link', 'GitHub link missing'); allPass = false; }

            return allPass;
        }

        // Run all tests
        async function runAllTests() {
            addResult('info', 'Test Started', new Date().toLocaleString());

            await testVideo();
            await testIndex();
            testViewport();
            testStyles();
            await testGitHubLink();
            const structureOK = testHTMLStructure();

            addResult(structureOK ? 'pass' : 'fail', 'Summary', structureOK ? 'All critical tests passed!' : 'Some tests failed');
        }

        runAllTests();
    </script>
</body>
</html>
